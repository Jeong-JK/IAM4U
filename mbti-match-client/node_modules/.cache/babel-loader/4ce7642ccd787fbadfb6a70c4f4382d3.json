{"ast":null,"code":"import _slicedToArray from \"C:\\\\test\\\\mbti-match-client-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\test\\\\mbti-match-client-master\\\\src\\\\containers\\\\Edit.js\";\nimport React, { useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { changeEditForm, changeUserData } from '../actions';\nimport EditForm from '../components/Edit/EditForm';\nimport BackTab from '../components/BackTab/BackTab';\nimport { objectKeysToCamelCase } from '../utility/formattingData';\nimport { putUserInfo } from '../api';\nconst Edit = ({\n  history\n}) => {\n  const _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    error = _useState2[0],\n    setError = _useState2[1];\n  const _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    file = _useState4[0],\n    setFile = _useState4[1];\n  const _useSelector = useSelector(state => ({\n      edit: state.edit,\n      user: state.user\n    })),\n    edit = _useSelector.edit,\n    user = _useSelector.user;\n  const dispatch = useDispatch();\n  const onChange = ev => {\n    const _ev$target = ev.target,\n      value = _ev$target.value,\n      name = _ev$target.name;\n    dispatch(changeEditForm({\n      name,\n      value\n    }));\n  };\n  const onFileChange = ev => {\n    setFile(ev.target.files[0]);\n  };\n  const onSubmit = async ev => {\n    ev.preventDefault();\n    const name = edit.name,\n      mbti = edit.mbti;\n    if ([name, mbti].includes('')) {\n      setError('모두 입력하세요.');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n    const userData = !file ? await putUserInfo(edit) : await putUserInfo(edit, formData);\n    dispatch(changeUserData(objectKeysToCamelCase(userData)));\n    history.push('/profile');\n  };\n  return React.createElement(React.Fragment, null, React.createElement(BackTab, {\n    title: 'Settings',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), React.createElement(EditForm, {\n    user: user,\n    edit: edit,\n    onChange: onChange,\n    onFileChange: onFileChange,\n    onSubmit: onSubmit,\n    error: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }));\n};\nexport default withRouter(Edit);","map":{"version":3,"names":["React","useState","withRouter","useSelector","useDispatch","changeEditForm","changeUserData","EditForm","BackTab","objectKeysToCamelCase","putUserInfo","Edit","history","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","file","setFile","_useSelector","state","edit","user","dispatch","onChange","ev","_ev$target","target","value","name","onFileChange","files","onSubmit","preventDefault","mbti","includes","formData","FormData","append","userData","push","createElement","Fragment","title","__source","fileName","_jsxFileName","lineNumber","__self"],"sources":["C:/test/mbti-match-client-master/src/containers/Edit.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { changeEditForm, changeUserData } from '../actions';\nimport EditForm from '../components/Edit/EditForm';\nimport BackTab from '../components/BackTab/BackTab';\nimport { objectKeysToCamelCase } from '../utility/formattingData';\nimport { putUserInfo } from '../api';\n\nconst Edit = ({ history }) => {\n  const [error, setError] = useState('');\n  const [file, setFile] = useState(null);\n  const { edit, user } = useSelector(state => ({\n    edit: state.edit,\n    user: state.user\n  }));\n  const dispatch = useDispatch();\n\n  const onChange = ev => {\n    const { value, name } = ev.target;\n    dispatch(\n      changeEditForm({\n        name,\n        value\n      })\n    );\n  };\n\n  const onFileChange = ev => {\n    setFile(ev.target.files[0]);\n  };\n\n  const onSubmit = async ev => {\n    ev.preventDefault();\n\n    const { name, mbti } = edit;\n\n    if ([name, mbti].includes('')) {\n      setError('모두 입력하세요.');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n    const userData = !file\n      ? await putUserInfo(edit)\n      : await putUserInfo(edit, formData);\n\n    dispatch(changeUserData(objectKeysToCamelCase(userData)));\n    history.push('/profile');\n  };\n\n  return (\n    <>\n      <BackTab title={'Settings'} />\n      <EditForm\n        user={user}\n        edit={edit}\n        onChange={onChange}\n        onFileChange={onFileChange}\n        onSubmit={onSubmit}\n        error={error}\n      />\n    </>\n  );\n};\n\nexport default withRouter(Edit);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}