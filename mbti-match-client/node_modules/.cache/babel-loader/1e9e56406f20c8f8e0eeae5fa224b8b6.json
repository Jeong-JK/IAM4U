{"ast":null,"code":"import _defineProperty from\"C:\\\\test\\\\mbti-match-client-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import axios from'axios';import{config}from'../config';axios.defaults.withCredentials=true;var ROOT=config.ROOT;export var postSignup=function postSignup(formData,registerData){return axios.post(\"\".concat(ROOT,\"/api/signup\"),_objectSpread({},registerData)).then(function(response){return axios.put(\"\".concat(ROOT,\"/api/upload\"),formData).then(function(result){return{data:result.data,error:''};}).catch(function(error){return{error:error.response.data.message||'server error'};});}).catch(function(error){var message='server error';if(error&&error.response&&error.response.data&&error.response.data.message){message=error.response.data.message;}return{error:message};});};export var getUser=function getUser(){return axios.get(\"\".concat(ROOT,\"/api/auth/user\")).then(function(response){return response.data;})// .catch(error => {\n//   return {\n//     error: error.response.data.message || 'server error'\n//   };\n// });\n.catch(function(error){var message='server error';if(error&&error.response&&error.response.data&&error.response.data.message){message=error.response.data.message;}return{error:message};});};export var postLogin=function postLogin(data){return axios({url:\"\".concat(ROOT,\"/api/login\"),method:'POST',data:data}).then(function(response){return{data:response.data,error:''};}).catch(function(error){return{error:error.response.data.message||'server error'};});};export var getLogout=function getLogout(){return axios({url:\"\".concat(ROOT,\"/api/logout\"),method:'GET'}).catch(function(error){console.log(error);});};export var getUsers=function getUsers(_ref){var limit=_ref.limit,pageIndex=_ref.pageIndex;return axios({url:\"\".concat(ROOT,\"/api/users?limit=\").concat(limit,\"&pageIndex=\").concat(pageIndex),method:'GET'}).then(function(response){return response.data;}).catch(function(error){console.log(error);});};export var addLikeUser=function addLikeUser(partnerId){return axios({url:\"\".concat(ROOT,\"/api/users/likes/\").concat(partnerId),method:'PUT'}).then(function(response){console.log(response);}).catch(function(error){console.log(error);});};export var getLikeMe=function getLikeMe(){return axios({url:\"\".concat(ROOT,\"/api/user/likes\"),method:'GET'}).then(function(response){return response.data.likes_me;}).catch(function(error){console.log(error);});};export var postChat=function postChat(partnerId){return axios({url:\"\".concat(ROOT,\"/api/chats/\").concat(partnerId),method:'POST'}).then(function(response){return response.data;}).catch(function(error){console.log(error);});};export var getChats=function getChats(){return axios({url:\"\".concat(ROOT,\"/api/chats\"),method:'GET'}).then(function(response){return response.data;}).catch(function(error){console.log(error);});};export var getChat=function getChat(roomId){return axios({url:\"\".concat(ROOT,\"/api/chats/\").concat(roomId),method:'GET'}).then(function(response){return response.data.chat;}).catch(function(error){console.log(error);});};export var postNewMessage=function postNewMessage(roomId,data){return axios({url:\"\".concat(ROOT,\"/api/chats/\").concat(roomId),method:'PUT',data:data}).then(function(response){console.log(response.data);return response.data;}).catch(function(error){console.log(error);});};export var putUserInfo=function putUserInfo(userData){var formData=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return axios.put(\"\".concat(ROOT,\"/api/user\"),_objectSpread({},userData)).then(function(response){if(formData){return axios.put('/api/upload',formData).then(function(result){return result.data.user;}).catch(function(error){return{error:error.response.data.message||'server error'};});}else{return response.data.user;}}).catch(function(error){return{error:error.response.data.message||'server error'};});};","map":{"version":3,"names":["axios","config","defaults","withCredentials","ROOT","postSignup","formData","registerData","post","concat","_objectSpread","then","response","put","result","data","error","catch","message","getUser","get","postLogin","url","method","getLogout","console","log","getUsers","_ref","limit","pageIndex","addLikeUser","partnerId","getLikeMe","likes_me","postChat","getChats","getChat","roomId","chat","postNewMessage","putUserInfo","userData","arguments","length","undefined","user"],"sources":["C:/test/mbti-match-client-master/src/api/index.js"],"sourcesContent":["import axios from 'axios';\nimport { config } from '../config';\n\naxios.defaults.withCredentials = true;\nconst { ROOT } = config;\n\nexport const postSignup = (formData, registerData) => {\n  return axios\n    .post(`${ROOT}/api/signup`, {\n      ...registerData\n    })\n    .then(response => {\n      return axios\n        .put(`${ROOT}/api/upload`, formData)\n        .then(result => {\n          return {\n            data: result.data,\n            error: ''\n          };\n        })\n        .catch(error => {\n          return {\n            error: error.response.data.message || 'server error'\n          };\n        });\n    })\n    .catch(error => {\n      let message = 'server error';\n      if (\n        error &&\n        error.response &&\n        error.response.data &&\n        error.response.data.message\n      ) {\n        message = error.response.data.message;\n      }\n    \n      return { error: message };\n    });\n};\n\nexport const getUser = () => {\n  return axios\n    .get(`${ROOT}/api/auth/user`)\n    .then(response => response.data)\n    // .catch(error => {\n    //   return {\n    //     error: error.response.data.message || 'server error'\n    //   };\n    // });\n    .catch(error => {\n      let message = 'server error';\n      if (\n        error &&\n        error.response &&\n        error.response.data &&\n        error.response.data.message\n      ) {\n        message = error.response.data.message;\n      }\n    \n      return { error: message };\n    });\n    \n};\n\nexport const postLogin = data => {\n  return axios({\n    url: `${ROOT}/api/login`,\n    method: 'POST',\n    data\n  })\n    .then(response => {\n      return {\n        data: response.data,\n        error: ''\n      };\n    })\n    .catch(error => {\n      return {\n        error: error.response.data.message || 'server error'\n      };\n    });\n};\n\nexport const getLogout = () => {\n  return axios({\n    url: `${ROOT}/api/logout`,\n    method: 'GET'\n  }).catch(error => {\n    console.log(error);\n  });\n};\n\nexport const getUsers = ({ limit, pageIndex }) => {\n  return axios({\n    url: `${ROOT}/api/users?limit=${limit}&pageIndex=${pageIndex}`,\n    method: 'GET'\n  })\n    .then(response => {\n      return response.data;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const addLikeUser = partnerId => {\n  return axios({\n    url: `${ROOT}/api/users/likes/${partnerId}`,\n    method: 'PUT'\n  })\n    .then(response => {\n      console.log(response);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const getLikeMe = () => {\n  return axios({\n    url: `${ROOT}/api/user/likes`,\n    method: 'GET'\n  })\n    .then(response => {\n      return response.data.likes_me;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const postChat = partnerId => {\n  return axios({\n    url: `${ROOT}/api/chats/${partnerId}`,\n    method: 'POST'\n  })\n    .then(response => {\n      return response.data;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const getChats = () => {\n  return axios({\n    url: `${ROOT}/api/chats`,\n    method: 'GET'\n  })\n    .then(response => {\n      return response.data;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const getChat = roomId => {\n  return axios({\n    url: `${ROOT}/api/chats/${roomId}`,\n    method: 'GET'\n  })\n    .then(response => {\n      return response.data.chat;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const postNewMessage = (roomId, data) => {\n  return axios({\n    url: `${ROOT}/api/chats/${roomId}`,\n    method: 'PUT',\n    data\n  })\n    .then(response => {\n      console.log(response.data);\n      return response.data;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const putUserInfo = (userData, formData = null) => {\n  return axios\n    .put(`${ROOT}/api/user`, {\n      ...userData\n    })\n    .then(response => {\n      if (formData) {\n        return axios\n          .put('/api/upload', formData)\n          .then(result => {\n            return result.data.user;\n          })\n          .catch(error => {\n            return {\n              error: error.response.data.message || 'server error'\n            };\n          });\n      } else {\n        return response.data.user;\n      }\n    })\n    .catch(error => {\n      return {\n        error: error.response.data.message || 'server error'\n      };\n    });\n};\n"],"mappings":"4wBAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,MAAM,KAAQ,WAAW,CAElCD,KAAK,CAACE,QAAQ,CAACC,eAAe,CAAG,IAAI,CAAC,GAC9B,CAAAC,IAAI,CAAKH,MAAM,CAAfG,IAAI,CAEZ,MAAO,IAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,QAAQ,CAAEC,YAAY,CAAK,CACpD,MAAO,CAAAP,KAAK,CACTQ,IAAI,IAAAC,MAAA,CAAIL,IAAI,gBAAAM,aAAA,IACRH,YAAY,CAChB,CAAC,CACDI,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChB,MAAO,CAAAZ,KAAK,CACTa,GAAG,IAAAJ,MAAA,CAAIL,IAAI,gBAAeE,QAAQ,CAAC,CACnCK,IAAI,CAAC,SAAAG,MAAM,CAAI,CACd,MAAO,CACLC,IAAI,CAAED,MAAM,CAACC,IAAI,CACjBC,KAAK,CAAE,EACT,CAAC,CACH,CAAC,CAAC,CACDC,KAAK,CAAC,SAAAD,KAAK,CAAI,CACd,MAAO,CACLA,KAAK,CAAEA,KAAK,CAACJ,QAAQ,CAACG,IAAI,CAACG,OAAO,EAAI,cACxC,CAAC,CACH,CAAC,CAAC,CACN,CAAC,CAAC,CACDD,KAAK,CAAC,SAAAD,KAAK,CAAI,CACd,GAAI,CAAAE,OAAO,CAAG,cAAc,CAC5B,GACEF,KAAK,EACLA,KAAK,CAACJ,QAAQ,EACdI,KAAK,CAACJ,QAAQ,CAACG,IAAI,EACnBC,KAAK,CAACJ,QAAQ,CAACG,IAAI,CAACG,OAAO,CAC3B,CACAA,OAAO,CAAGF,KAAK,CAACJ,QAAQ,CAACG,IAAI,CAACG,OAAO,CACvC,CAEA,MAAO,CAAEF,KAAK,CAAEE,OAAQ,CAAC,CAC3B,CAAC,CAAC,CACN,CAAC,CAED,MAAO,IAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CAC3B,MAAO,CAAAnB,KAAK,CACToB,GAAG,IAAAX,MAAA,CAAIL,IAAI,kBAAgB,CAAC,CAC5BO,IAAI,CAAC,SAAAC,QAAQ,QAAI,CAAAA,QAAQ,CAACG,IAAI,GAC/B;AACA;AACA;AACA;AACA;AAAA,CACCE,KAAK,CAAC,SAAAD,KAAK,CAAI,CACd,GAAI,CAAAE,OAAO,CAAG,cAAc,CAC5B,GACEF,KAAK,EACLA,KAAK,CAACJ,QAAQ,EACdI,KAAK,CAACJ,QAAQ,CAACG,IAAI,EACnBC,KAAK,CAACJ,QAAQ,CAACG,IAAI,CAACG,OAAO,CAC3B,CACAA,OAAO,CAAGF,KAAK,CAACJ,QAAQ,CAACG,IAAI,CAACG,OAAO,CACvC,CAEA,MAAO,CAAEF,KAAK,CAAEE,OAAQ,CAAC,CAC3B,CAAC,CAAC,CAEN,CAAC,CAED,MAAO,IAAM,CAAAG,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAGN,IAAI,CAAI,CAC/B,MAAO,CAAAf,KAAK,CAAC,CACXsB,GAAG,IAAAb,MAAA,CAAKL,IAAI,cAAY,CACxBmB,MAAM,CAAE,MAAM,CACdR,IAAI,CAAJA,IACF,CAAC,CAAC,CACCJ,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChB,MAAO,CACLG,IAAI,CAAEH,QAAQ,CAACG,IAAI,CACnBC,KAAK,CAAE,EACT,CAAC,CACH,CAAC,CAAC,CACDC,KAAK,CAAC,SAAAD,KAAK,CAAI,CACd,MAAO,CACLA,KAAK,CAAEA,KAAK,CAACJ,QAAQ,CAACG,IAAI,CAACG,OAAO,EAAI,cACxC,CAAC,CACH,CAAC,CAAC,CACN,CAAC,CAED,MAAO,IAAM,CAAAM,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CAC7B,MAAO,CAAAxB,KAAK,CAAC,CACXsB,GAAG,IAAAb,MAAA,CAAKL,IAAI,eAAa,CACzBmB,MAAM,CAAE,KACV,CAAC,CAAC,CAACN,KAAK,CAAC,SAAAD,KAAK,CAAI,CAChBS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CAAC,CAAC,CACJ,CAAC,CAED,MAAO,IAAM,CAAAW,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAAC,IAAA,CAA6B,IAAvB,CAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CAAEC,SAAS,CAAAF,IAAA,CAATE,SAAS,CACzC,MAAO,CAAA9B,KAAK,CAAC,CACXsB,GAAG,IAAAb,MAAA,CAAKL,IAAI,sBAAAK,MAAA,CAAoBoB,KAAK,gBAAApB,MAAA,CAAcqB,SAAS,CAAE,CAC9DP,MAAM,CAAE,KACV,CAAC,CAAC,CACCZ,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChB,MAAO,CAAAA,QAAQ,CAACG,IAAI,CACtB,CAAC,CAAC,CACDE,KAAK,CAAC,SAAAD,KAAK,CAAI,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAED,MAAO,IAAM,CAAAe,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAGC,SAAS,CAAI,CACtC,MAAO,CAAAhC,KAAK,CAAC,CACXsB,GAAG,IAAAb,MAAA,CAAKL,IAAI,sBAAAK,MAAA,CAAoBuB,SAAS,CAAE,CAC3CT,MAAM,CAAE,KACV,CAAC,CAAC,CACCZ,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChBa,OAAO,CAACC,GAAG,CAACd,QAAQ,CAAC,CACvB,CAAC,CAAC,CACDK,KAAK,CAAC,SAAAD,KAAK,CAAI,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAED,MAAO,IAAM,CAAAiB,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CAC7B,MAAO,CAAAjC,KAAK,CAAC,CACXsB,GAAG,IAAAb,MAAA,CAAKL,IAAI,mBAAiB,CAC7BmB,MAAM,CAAE,KACV,CAAC,CAAC,CACCZ,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChB,MAAO,CAAAA,QAAQ,CAACG,IAAI,CAACmB,QAAQ,CAC/B,CAAC,CAAC,CACDjB,KAAK,CAAC,SAAAD,KAAK,CAAI,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAED,MAAO,IAAM,CAAAmB,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAGH,SAAS,CAAI,CACnC,MAAO,CAAAhC,KAAK,CAAC,CACXsB,GAAG,IAAAb,MAAA,CAAKL,IAAI,gBAAAK,MAAA,CAAcuB,SAAS,CAAE,CACrCT,MAAM,CAAE,MACV,CAAC,CAAC,CACCZ,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChB,MAAO,CAAAA,QAAQ,CAACG,IAAI,CACtB,CAAC,CAAC,CACDE,KAAK,CAAC,SAAAD,KAAK,CAAI,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAED,MAAO,IAAM,CAAAoB,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CAC5B,MAAO,CAAApC,KAAK,CAAC,CACXsB,GAAG,IAAAb,MAAA,CAAKL,IAAI,cAAY,CACxBmB,MAAM,CAAE,KACV,CAAC,CAAC,CACCZ,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChB,MAAO,CAAAA,QAAQ,CAACG,IAAI,CACtB,CAAC,CAAC,CACDE,KAAK,CAAC,SAAAD,KAAK,CAAI,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAED,MAAO,IAAM,CAAAqB,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAGC,MAAM,CAAI,CAC/B,MAAO,CAAAtC,KAAK,CAAC,CACXsB,GAAG,IAAAb,MAAA,CAAKL,IAAI,gBAAAK,MAAA,CAAc6B,MAAM,CAAE,CAClCf,MAAM,CAAE,KACV,CAAC,CAAC,CACCZ,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChB,MAAO,CAAAA,QAAQ,CAACG,IAAI,CAACwB,IAAI,CAC3B,CAAC,CAAC,CACDtB,KAAK,CAAC,SAAAD,KAAK,CAAI,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAED,MAAO,IAAM,CAAAwB,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIF,MAAM,CAAEvB,IAAI,CAAK,CAC9C,MAAO,CAAAf,KAAK,CAAC,CACXsB,GAAG,IAAAb,MAAA,CAAKL,IAAI,gBAAAK,MAAA,CAAc6B,MAAM,CAAE,CAClCf,MAAM,CAAE,KAAK,CACbR,IAAI,CAAJA,IACF,CAAC,CAAC,CACCJ,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChBa,OAAO,CAACC,GAAG,CAACd,QAAQ,CAACG,IAAI,CAAC,CAC1B,MAAO,CAAAH,QAAQ,CAACG,IAAI,CACtB,CAAC,CAAC,CACDE,KAAK,CAAC,SAAAD,KAAK,CAAI,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAED,MAAO,IAAM,CAAAyB,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,QAAQ,CAAsB,IAApB,CAAApC,QAAQ,CAAAqC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CACnD,MAAO,CAAA3C,KAAK,CACTa,GAAG,IAAAJ,MAAA,CAAIL,IAAI,cAAAM,aAAA,IACPgC,QAAQ,CACZ,CAAC,CACD/B,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChB,GAAIN,QAAQ,CAAE,CACZ,MAAO,CAAAN,KAAK,CACTa,GAAG,CAAC,aAAa,CAAEP,QAAQ,CAAC,CAC5BK,IAAI,CAAC,SAAAG,MAAM,CAAI,CACd,MAAO,CAAAA,MAAM,CAACC,IAAI,CAAC+B,IAAI,CACzB,CAAC,CAAC,CACD7B,KAAK,CAAC,SAAAD,KAAK,CAAI,CACd,MAAO,CACLA,KAAK,CAAEA,KAAK,CAACJ,QAAQ,CAACG,IAAI,CAACG,OAAO,EAAI,cACxC,CAAC,CACH,CAAC,CAAC,CACN,CAAC,IAAM,CACL,MAAO,CAAAN,QAAQ,CAACG,IAAI,CAAC+B,IAAI,CAC3B,CACF,CAAC,CAAC,CACD7B,KAAK,CAAC,SAAAD,KAAK,CAAI,CACd,MAAO,CACLA,KAAK,CAAEA,KAAK,CAACJ,QAAQ,CAACG,IAAI,CAACG,OAAO,EAAI,cACxC,CAAC,CACH,CAAC,CAAC,CACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}