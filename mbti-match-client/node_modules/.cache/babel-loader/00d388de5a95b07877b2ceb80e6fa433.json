{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\test\\\\mbti-match-client-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\test\\\\mbti-match-client-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\test\\\\mbti-match-client-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';// import { withRouter } from 'react-router-dom';\nimport{useSelector,useDispatch}from'react-redux';import{changeEditForm,changeUserData}from'../actions';import EditForm from'../components/Edit/EditForm';import BackTab from'../components/BackTab/BackTab';import{objectKeysToCamelCase}from'../utility/formattingData';import{putUserInfo}from'../api';var Edit=function Edit(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var _useSelector=useSelector(function(state){return{edit:state.edit,user:state.user};}),edit=_useSelector.edit,user=_useSelector.user;var dispatch=useDispatch();var onChange=function onChange(ev){var _ev$target=ev.target,value=_ev$target.value,name=_ev$target.name;dispatch(changeEditForm({name:name,value:value}));};var onFileChange=function onFileChange(ev){setFile(ev.target.files[0]);};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ev){var name,mbti,formData,userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ev.preventDefault();name=edit.name,mbti=edit.mbti;if(![name,mbti].includes('')){_context.next=5;break;}setError('모두 입력하세요.');return _context.abrupt(\"return\");case 5:formData=new FormData();formData.append('file',file);if(file){_context.next=13;break;}_context.next=10;return putUserInfo(edit);case 10:_context.t0=_context.sent;_context.next=16;break;case 13:_context.next=15;return putUserInfo(edit,formData);case 15:_context.t0=_context.sent;case 16:userData=_context.t0;dispatch(changeUserData(objectKeysToCamelCase(userData)));// history.push('/profile');\ncase 18:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return React.createElement(React.Fragment,null,React.createElement(BackTab,{title:'Settings'}),React.createElement(EditForm,{user:user,edit:edit,onChange:onChange,onFileChange:onFileChange,onSubmit:onSubmit,error:error}));};export default Edit;","map":{"version":3,"names":["React","useState","useNavigate","useSelector","useDispatch","changeEditForm","changeUserData","EditForm","BackTab","objectKeysToCamelCase","putUserInfo","Edit","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","file","setFile","_useSelector","state","edit","user","dispatch","onChange","ev","_ev$target","target","value","name","onFileChange","files","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","mbti","formData","userData","wrap","_callee$","_context","prev","next","preventDefault","includes","abrupt","FormData","append","t0","sent","stop","_x","apply","arguments","createElement","Fragment","title"],"sources":["C:/test/mbti-match-client-master/src/containers/Edit.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n// import { withRouter } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { changeEditForm, changeUserData } from '../actions';\nimport EditForm from '../components/Edit/EditForm';\nimport BackTab from '../components/BackTab/BackTab';\nimport { objectKeysToCamelCase } from '../utility/formattingData';\nimport { putUserInfo } from '../api';\n\nconst Edit = () => {\n  const [error, setError] = useState('');\n  const [file, setFile] = useState(null);\n  const { edit, user } = useSelector(state => ({\n    edit: state.edit,\n    user: state.user\n  }));\n  const dispatch = useDispatch();\n\n  const onChange = ev => {\n    const { value, name } = ev.target;\n    dispatch(\n      changeEditForm({\n        name,\n        value\n      })\n    );\n  };\n\n  const onFileChange = ev => {\n    setFile(ev.target.files[0]);\n  };\n\n  const onSubmit = async ev => {\n    ev.preventDefault();\n\n    const { name, mbti } = edit;\n\n    if ([name, mbti].includes('')) {\n      setError('모두 입력하세요.');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n    const userData = !file\n      ? await putUserInfo(edit)\n      : await putUserInfo(edit, formData);\n\n    dispatch(changeUserData(objectKeysToCamelCase(userData)));\n    // history.push('/profile');\n  };\n\n  return (\n    <>\n      <BackTab title={'Settings'} />\n      <EditForm\n        user={user}\n        edit={edit}\n        onChange={onChange}\n        onFileChange={onFileChange}\n        onSubmit={onSubmit}\n        error={error}\n      />\n    </>\n  );\n};\n\nexport default Edit;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}