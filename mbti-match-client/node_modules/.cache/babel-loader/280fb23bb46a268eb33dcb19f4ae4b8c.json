{"ast":null,"code":"import _defineProperty from \"C:\\\\test\\\\mbti-match-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport axios from 'axios';\nimport { config } from '../config';\naxios.defaults.withCredentials = true;\nconst ROOT = config.ROOT;\nexport const postSignup = (formData, registerData) => {\n  return axios.post(\"\".concat(ROOT, \"/api/signup\"), _objectSpread({}, registerData)).then(response => {\n    return axios.put(\"\".concat(ROOT, \"/api/upload\"), formData).then(result => {\n      return {\n        data: result.data,\n        error: ''\n      };\n    }).catch(error => {\n      return {\n        error: error.response.data.message || 'server error'\n      };\n    });\n  }).catch(error => {\n    let message = 'server error';\n    if (error && error.response && error.response.data && error.response.data.message) {\n      message = error.response.data.message;\n    }\n    return {\n      error: message\n    };\n  });\n};\nexport const getUser = async () => {\n  try {\n    const token = localStorage.getItem('jwt');\n    const response = await axios.get(\"\".concat(config.ROOT, \"/auth/user\"), {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: \"Bearer \".concat(token)\n      }\n    });\n    return response.data;\n  } catch (error) {\n    let message = 'server error';\n    if (error && error.response && error.response.data && error.response.data.message) {\n      message = error.response.data.message;\n    }\n    return {\n      error: message\n    };\n  }\n};\n//   return axios\n//     .get(`${ROOT}/auth/user`)\n//     .then(response => response.data)\n//     // .catch(error => {\n//     //   return {\n//     //     error: error.response.data.message || 'server error'\n//     //   };\n//     // });\n//     .catch(error => {\n//       let message = 'server error';\n//       if (\n//         error &&\n//         error.response &&\n//         error.response.data &&\n//         error.response.data.message\n//       ) {\n//         message = error.response.data.message;\n//       }\n\n//       return { error: message };\n//     });\n\n// };\n\nexport const postLogin = data => {\n  return axios({\n    url: \"\".concat(ROOT, \"/api/login\"),\n    method: 'POST',\n    data\n  }).then(response => {\n    return {\n      data: response.data,\n      error: ''\n    };\n  }).catch(error => {\n    return {\n      error: error.response.data.message || 'server error'\n    };\n  });\n};\nexport const getLogout = () => {\n  return axios({\n    url: \"\".concat(ROOT, \"/api/logout\"),\n    method: 'GET'\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const getUsers = ({\n  limit,\n  pageIndex\n}) => {\n  return axios({\n    url: \"\".concat(ROOT, \"/api/users?limit=\").concat(limit, \"&pageIndex=\").concat(pageIndex),\n    method: 'GET'\n  }).then(response => {\n    return response.data;\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const addLikeUser = partnerId => {\n  return axios({\n    url: \"\".concat(ROOT, \"/api/users/likes/\").concat(partnerId),\n    method: 'PUT'\n  }).then(response => {\n    console.log(response);\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const getLikeMe = () => {\n  return axios({\n    url: \"\".concat(ROOT, \"/api/user/likes\"),\n    method: 'GET'\n  }).then(response => {\n    return response.data.likes_me;\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const postChat = partnerId => {\n  return axios({\n    url: \"\".concat(ROOT, \"/api/chats/\").concat(partnerId),\n    method: 'POST'\n  }).then(response => {\n    return response.data;\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const getChats = () => {\n  return axios({\n    url: \"\".concat(ROOT, \"/api/chats\"),\n    method: 'GET'\n  }).then(response => {\n    return response.data;\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const getChat = roomId => {\n  return axios({\n    url: \"\".concat(ROOT, \"/api/chats/\").concat(roomId),\n    method: 'GET'\n  }).then(response => {\n    return response.data.chat;\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const postNewMessage = (roomId, data) => {\n  return axios({\n    url: \"\".concat(ROOT, \"/api/chats/\").concat(roomId),\n    method: 'PUT',\n    data\n  }).then(response => {\n    console.log(response.data);\n    return response.data;\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const putUserInfo = (userData, formData = null) => {\n  return axios.put(\"\".concat(ROOT, \"/api/user\"), _objectSpread({}, userData)).then(response => {\n    if (formData) {\n      return axios.put('/api/upload', formData).then(result => {\n        return result.data.user;\n      }).catch(error => {\n        return {\n          error: error.response.data.message || 'server error'\n        };\n      });\n    } else {\n      return response.data.user;\n    }\n  }).catch(error => {\n    return {\n      error: error.response.data.message || 'server error'\n    };\n  });\n};","map":{"version":3,"names":["axios","config","defaults","withCredentials","ROOT","postSignup","formData","registerData","post","concat","_objectSpread","then","response","put","result","data","error","catch","message","getUser","token","localStorage","getItem","get","headers","Authorization","postLogin","url","method","getLogout","console","log","getUsers","limit","pageIndex","addLikeUser","partnerId","getLikeMe","likes_me","postChat","getChats","getChat","roomId","chat","postNewMessage","putUserInfo","userData","user"],"sources":["C:/test/mbti-match-client/src/api/index.js"],"sourcesContent":["import axios from 'axios';\nimport { config } from '../config';\n\naxios.defaults.withCredentials = true;\nconst { ROOT } = config;\n\nexport const postSignup = (formData, registerData) => {\n  return axios\n    .post(`${ROOT}/api/signup`, {\n      ...registerData\n    })\n    .then(response => {\n      return axios\n        .put(`${ROOT}/api/upload`, formData)\n        .then(result => {\n          return {\n            data: result.data,\n            error: ''\n          };\n        })\n        .catch(error => {\n          return {\n            error: error.response.data.message || 'server error'\n          };\n        });\n    })\n    .catch(error => {\n      let message = 'server error';\n      if (\n        error &&\n        error.response &&\n        error.response.data &&\n        error.response.data.message\n      ) {\n        message = error.response.data.message;\n      }\n    \n      return { error: message };\n    });\n};\n\nexport const getUser = async () => {\n  try {\n    const token = localStorage.getItem('jwt');\n    const response = await axios.get(`${config.ROOT}/auth/user`, {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    let message = 'server error';\n    if (\n      error &&\n      error.response &&\n      error.response.data &&\n      error.response.data.message\n    ) {\n      message = error.response.data.message;\n    }\n    return { error: message };\n  }\n};\n//   return axios\n//     .get(`${ROOT}/auth/user`)\n//     .then(response => response.data)\n//     // .catch(error => {\n//     //   return {\n//     //     error: error.response.data.message || 'server error'\n//     //   };\n//     // });\n//     .catch(error => {\n//       let message = 'server error';\n//       if (\n//         error &&\n//         error.response &&\n//         error.response.data &&\n//         error.response.data.message\n//       ) {\n//         message = error.response.data.message;\n//       }\n    \n//       return { error: message };\n//     });\n    \n// };\n\nexport const postLogin = data => {\n  return axios({\n    url: `${ROOT}/api/login`,\n    method: 'POST',\n    data\n  })\n    .then(response => {\n      return {\n        data: response.data,\n        error: ''\n      };\n    })\n    .catch(error => {\n      return {\n        error: error.response.data.message || 'server error'\n      };\n    });\n};\n\nexport const getLogout = () => {\n  return axios({\n    url: `${ROOT}/api/logout`,\n    method: 'GET'\n  }).catch(error => {\n    console.log(error);\n  });\n};\n\nexport const getUsers = ({ limit, pageIndex }) => {\n  return axios({\n    url: `${ROOT}/api/users?limit=${limit}&pageIndex=${pageIndex}`,\n    method: 'GET'\n  })\n    .then(response => {\n      return response.data;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const addLikeUser = partnerId => {\n  return axios({\n    url: `${ROOT}/api/users/likes/${partnerId}`,\n    method: 'PUT'\n  })\n    .then(response => {\n      console.log(response);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const getLikeMe = () => {\n  return axios({\n    url: `${ROOT}/api/user/likes`,\n    method: 'GET'\n  })\n    .then(response => {\n      return response.data.likes_me;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const postChat = partnerId => {\n  return axios({\n    url: `${ROOT}/api/chats/${partnerId}`,\n    method: 'POST'\n  })\n    .then(response => {\n      return response.data;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const getChats = () => {\n  return axios({\n    url: `${ROOT}/api/chats`,\n    method: 'GET'\n  })\n    .then(response => {\n      return response.data;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const getChat = roomId => {\n  return axios({\n    url: `${ROOT}/api/chats/${roomId}`,\n    method: 'GET'\n  })\n    .then(response => {\n      return response.data.chat;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const postNewMessage = (roomId, data) => {\n  return axios({\n    url: `${ROOT}/api/chats/${roomId}`,\n    method: 'PUT',\n    data\n  })\n    .then(response => {\n      console.log(response.data);\n      return response.data;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nexport const putUserInfo = (userData, formData = null) => {\n  return axios\n    .put(`${ROOT}/api/user`, {\n      ...userData\n    })\n    .then(response => {\n      if (formData) {\n        return axios\n          .put('/api/upload', formData)\n          .then(result => {\n            return result.data.user;\n          })\n          .catch(error => {\n            return {\n              error: error.response.data.message || 'server error'\n            };\n          });\n      } else {\n        return response.data.user;\n      }\n    })\n    .catch(error => {\n      return {\n        error: error.response.data.message || 'server error'\n      };\n    });\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}