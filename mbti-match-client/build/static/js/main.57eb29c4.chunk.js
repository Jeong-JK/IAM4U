(this["webpackJsonpmbti-match-client"]=this["webpackJsonpmbti-match-client"]||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){},123:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},144:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},181:function(e,t){},184:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(5),o=a(0),i=a.n(o),l=a(32),s=a.n(l),u=a(44),m=a(10),p=a(13),E=(a(106),a(4)),f="CHANGE_LOGIN_FORM",d="SUCCESS_USER_AUTHENTICATION",h="CONFIRMED_NOT_AUTHENTICATED",b="SUCCESS_REGISTER_MEMBER",g="USER_LOGOUT",v="CHANGE_REGISTER_FORM",j="SUCCESS_USER_DATA_UPDATE",O="GET_GEOLOCATION",N="LOAD_USERS_SUCCESS",C="INCREASE_CHOICE_COUNT",w="RESET_CHOICE_COUNT",S="INCREASE_PAGE_INDEX",y="SELECTED_ALL_MEMBERS",_="ADD_NEW_USERS_LIST",k="LEAVE_MEMBERS_LIST",x="LOAD_CHATS_LIST_SUCCESS",I="ENTER_CHAT_ROOM",T="ADD_NEW_MESSAGE",A="LEAVE_ROOM",R="CHANGE_EDIT_FORM",F="NONE_CHATS",P=a(6),U=(a(107),a(189)),L={Auth:{region:"ap-northeast-2",userPoolId:"ap-northeast-2_zNz0cuK0c",userPoolWebClientId:"7arvu987ihdqofl4ob3cldcrvb",mandatorySignIn:!1,authenticationFlowType:"USER_PASSWORD_AUTH"}},M=a(55);M.a.configure(L);var D=function(e){var t=e.onSubmit,a=e.onChange,n=e.login,r=e.error,c="";return c=Array.isArray(r)?r.map(function(e){return i.a.createElement("p",{className:"error"},e)}):i.a.createElement("p",{className:"error"},r),i.a.createElement("div",{className:"loginForm form"},i.a.createElement("div",{className:"errors"},c),i.a.createElement("form",{onSubmit:t},i.a.createElement("input",{type:"email",name:"email",placeholder:"email",maxLength:"80",value:n?n.email:"",onChange:a,required:!0}),i.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:n?n.password:"",onChange:a,required:!0}),i.a.createElement("button",{type:"submit"},"Login")),i.a.createElement(p.b,{to:"/signup",className:"button"},"Sign up"))},G=(a(123),function(){return i.a.createElement("div",{className:"logo-wrap"},i.a.createElement("div",{className:"logo-area"},i.a.createElement("h1",{className:"logo","data-heading":"MATCH \u2661 MINDS"},"MATCH \u2661 MINDS")))}),J=function(e){var t=e.name,a=e.value;return{type:v,name:t,value:a}},q=function(e){var t="",a="",n="";return e&&e.mbti&&e.mbti.type&&(t=e.mbti.type),e&&e.name&&(a=e.name),e&&e.description&&(n=e.description),{type:b,user:e,edit:{mbti:t,name:a,description:n}}},B=function(e,t){return{type:O,state:e,location:t}},H=function(e){return{type:d,user:e,edit:{mbti:e.mbti.type,name:e.name,description:e.description}}},z=function(e){return{type:j,user:e}},V=function(){return{type:y}},K=function(e){return{type:x,chats:e}},X=function(e){return{type:I,chat:e}},W=a(8),Z=a(14),$=a.n(Z),Q={ROOT:"https://jxsbyfmks7.execute-api.ap-northeast-2.amazonaws.com/prod/",SOCKET_ROOT:"wss://datingapp.store"};function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach(function(t){Object(W.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}$.a.defaults.withCredentials=!0;var te=Q.ROOT,ae=function(e,t){return $.a.post("".concat(te,"/api/signup"),ee({},t)).then(function(t){return $.a.put("".concat(te,"/api/upload"),e).then(function(e){return{data:e.data,error:""}}).catch(function(e){return{error:e.response.data.message||"server error"}})}).catch(function(e){var t="server error";return e&&e.response&&e.response.data&&e.response.data.message&&(t=e.response.data.message),{error:t}})},ne=function(){var e=Object(c.a)(r.a.mark(function e(){var t,a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("jwt"),e.next=4,$.a.get("".concat(Q.ROOT,"/auth/user"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),n="server error",e.t0&&e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&(n=e.t0.response.data.message),e.abrupt("return",{error:n});case 13:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),re=function(e){var t=e.limit,a=e.pageIndex;return $()({url:"".concat(te,"/api/users?limit=").concat(t,"&pageIndex=").concat(a),method:"GET"}).then(function(e){return e.data}).catch(function(e){console.log(e)})},ce=function(e){return $()({url:"".concat(te,"/api/users/likes/").concat(e),method:"PUT"}).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},oe=function(e){return $()({url:"".concat(te,"/api/chats/").concat(e),method:"GET"}).then(function(e){return e.data.chat}).catch(function(e){console.log(e)})},ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return $.a.put("".concat(te,"/api/user"),ee({},e)).then(function(e){return t?$.a.put("/api/upload",t).then(function(e){return e.data.user}).catch(function(e){return{error:e.response.data.message||"server error"}}):e.data.user}).catch(function(e){return{error:e.response.data.message||"server error"}})},le=a(28);function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return{};var t={},a=[];return Object(le.forEach)(e,function(n,r){(Object(le.isPlainObject)(n)||Object(le.isArray)(n))&&(n=se(n)),Object(le.isArray)(e)?a.push(n):t[Object(le.camelCase)(r)]=n}),Object(le.isArray)(e)?a:t}M.a.configure(L);var ue=function(){var e=Object(o.useState)(""),t=Object(P.a)(e,2),a=t[0],n=t[1],l=Object(m.c)(function(e){return e.login}),s=Object(m.b)(),u=Object(E.q)(),p=function(){u("/profile")};Object(o.useEffect)(function(){new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)},i.a.createElement("button",{onClick:p},"\ub85c\uadf8\uc778")).then(function(e){console.log(e.coords),s(B("login",{latitude:e.coords.latitude,longitude:e.coords.longitude}))}).catch(function(e){n("\ud604\uc7ac \uc704\uce58\ub97c \ubc1b\uc544\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")})},[s]);var d=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,c,o,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,U.a.signIn(l.email,l.password);case 4:return a=e.sent,c=a.signInUserSession.idToken.jwtToken,localStorage.setItem("jwt",c),e.next=9,fetch("https://wfqynf004c.execute-api.ap-northeast-2.amazonaws.com/prod/auth/user",{method:"GET",headers:{Authorization:"Bearer ".concat(c)}});case 9:return o=e.sent,e.next=12,o.json();case 12:i=e.sent,console.log("\u2705 \uc720\uc800 \uc815\ubcf4:",i),s(H(se(i.user))),u("/profile"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.error("\ub85c\uadf8\uc778 \uc2e4\ud328:",e.t0),n("\ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");case 22:case"end":return e.stop()}},e,null,[[1,18]])}));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement(G,null),i.a.createElement(D,{onChange:function(e){var t=e.target,a=t.value,n=t.name;s(function(e){var t=e.name,a=e.value;return{type:f,name:t,value:a}}({name:n,value:a}))},onSubmit:d,error:a,login:l}))},me=(a(140),function(e){var t=e.onSubmit,a=e.onChange,n=e.register,r=e.error,c=e.onFileChange,l=null;return Object(o.useEffect)(function(){l.scrollIntoView({block:"start"})},[r,l]),i.a.createElement("div",{className:"signupForm form"},i.a.createElement("form",{onSubmit:t,ref:function(e){return l=e}},i.a.createElement("p",{className:"error"},r),i.a.createElement("label",{htmlFor:"mbit",required:!0},"MBTI"),i.a.createElement("select",{name:"mbti",id:"mbti",required:!0,value:n.mbti,onChange:a},i.a.createElement("option",{value:""},"mbti\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694."),i.a.createElement("option",{value:"intj"},"INTJ \uc6a9\uc758\uc8fc\ub3c4\ud55c \uc804\ub7b5\uac00"),i.a.createElement("option",{value:"intp"},"INTP \ub17c\ub9ac\uc801\uc778 \uc0ac\uc0c9\uac00"),i.a.createElement("option",{value:"entj"},"ENTJ \ub300\ub2f4\ud55c \ud1b5\uc194\uc790"),i.a.createElement("option",{value:"entp"},"ENTP \ub728\uac70\uc6b4 \ub17c\uc7c1\uc744 \uc990\uae30\ub294 \ubcc0\ub860\uac00"),i.a.createElement("option",{value:"infj"},"INFJ \uc120\uc758\uc758 \uc639\ud638\uc790"),i.a.createElement("option",{value:"infp"},"INFP \uc5f4\uc815\uc801\uc778 \uc911\uc7ac\uc790"),i.a.createElement("option",{value:"enfj"},"ENFJ \uc815\uc758\ub85c\uc6b4 \uc0ac\ud68c\uc6b4\ub3d9\uac00"),i.a.createElement("option",{value:"enfp"},"ENFP \uc7ac\uae30\ubc1c\ub784\ud55c \ud65c\ub3d9\uac00"),i.a.createElement("option",{value:"istj"},"ISTJ \uccad\ub834\uacb0\ubc31\ud55c \ub17c\ub9ac\uc8fc\uc758\uc790"),i.a.createElement("option",{value:"isfj"},"ISFJ \uc6a9\uac10\ud55c \uc218\ud638\uc790"),i.a.createElement("option",{value:"estj"},"ESTJ \uc5c4\uaca9\ud55c \uad00\ub9ac\uc790"),i.a.createElement("option",{value:"esfj"},"ESFJ \uc0ac\uad50\uc801\uc778 \uc678\uad50\uad00"),i.a.createElement("option",{value:"istp"},"ISTP \ub9cc\ub2a5 \uc7ac\uc8fc\uafbc"),i.a.createElement("option",{value:"isfp"},"ISFP \ud638\uae30\uc2ec \ub9ce\uc740 \uc608\uc220\uac00"),i.a.createElement("option",{value:"estp"},"ESTP \ubaa8\ud5d8\uc744 \uc990\uae30\ub294 \uc0ac\uc5c5\uac00"),i.a.createElement("option",{value:"esfp"},"ESFP \uc790\uc720\ub85c\uc6b4 \uc601\ud63c\uc758 \uc5f0\uc608\uc778")),i.a.createElement("p",null,"mbti\ub97c \ubaa8\ub974\uc2e0\ub2e4\uba74",i.a.createElement("a",{href:"https://www.16personalities.com/ko/%EB%AC%B4%EB%A3%8C-%EC%84%B1%EA%B2%A9-%EC%9C%A0%ED%98%95-%EA%B2%80%EC%82%AC"},"mbti \uc0ac\uc774\ud2b8"),"\uc5d0\uc11c \uac80\uc0ac\ub97c \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4."),i.a.createElement("label",{htmlFor:"email"},"email"),i.a.createElement("input",{type:"email",name:"email",required:!0,value:n.email,onChange:a,maxLength:"100"}),i.a.createElement("label",{htmlFor:"password"},"password"),i.a.createElement("input",{type:"password",name:"password",required:!0,value:n.password||"",onChange:a,maxLength:"18",minLength:"6"}),i.a.createElement("label",{htmlFor:"passwordConfirm"},"password confirm"),i.a.createElement("input",{type:"password",name:"passwordConfirm",required:!0,value:n.passwordConfirm||"",onChange:a,maxLength:"18",minLength:"6"}),i.a.createElement("label",{htmlFor:"name"},"name"),i.a.createElement("input",{type:"text",name:"name",required:!0,value:n.name||"",onChange:a,maxLength:"13"}),i.a.createElement("p",{className:"title"},"\uc131\ubcc4"),i.a.createElement("div",{className:"gender-area"},i.a.createElement("input",{type:"radio",name:"gender",value:"female",id:"female",checked:"female"===n.gender,onChange:a,required:!0}),i.a.createElement("label",{htmlFor:"female"},"\uc5ec\uc131"),i.a.createElement("input",{type:"radio",name:"gender",value:"male",id:"male",checked:"male"===n.gender,onChange:a}),i.a.createElement("label",{htmlFor:"male"},"\ub0a8\uc131")),i.a.createElement("label",{htmlFor:"file"},"\ud504\ub85c\ud544 \uc0ac\uc9c4"),i.a.createElement("input",{type:"file",name:"file",id:"file",onChange:c,accept:"image/x-png,image/gif,image/jpeg",required:!0}),i.a.createElement("label",{htmlFor:"description"},"\uc790\uae30\uc18c\uac1c"),i.a.createElement("textarea",{type:"text",name:"description",maxLength:"60",value:n.description,onChange:a}),i.a.createElement("button",null,"Sign up")))}),pe=(a(141),function(e){var t=e.title,a=Object(E.q)();return i.a.createElement("div",{className:"back-tab",onClick:function(){a(-1)}},"\u2190 ",t)}),Ee=function(){var e=Object(o.useState)(""),t=Object(P.a)(e,2),a=t[0],n=t[1],l=Object(o.useState)(null),s=Object(P.a)(l,2),u=s[0],p=s[1],f=Object(m.c)(function(e){return e.register}),d=Object(m.b)();Object(E.q)();Object(o.useEffect)(function(){new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)}).then(function(e){d(B("register",{latitude:e.coords.latitude,longitude:e.coords.longitude}))}).catch(function(){n("\ud604\uc7ac \uc704\uce58\ub97c \ubc1b\uc544\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")})},[d]);var h=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,c,o,i,l,s,m,p,E;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/,c=f.email,o=f.password,i=f.passwordConfirm,l=f.name,s=f.mbti,m=f.gender,![c,o,i,l,s,m].includes("")){e.next=6;break}return n("\ubaa8\ub450 \uc785\ub825\ud558\uc138\uc694."),e.abrupt("return");case 6:if(a.test(o)){e.next=9;break}return n("\ube44\ubc00\ubc88\ud638\ub294 \uc22b\uc790\uc640 \uc601\ubb38 \ud3ec\ud568 6\uc790 \uc774\uc0c1 18\uc790 \uc774\ud558\ub85c \uc785\ub825\ud574\uc8fc\uc138\uc694."),e.abrupt("return");case 9:if(o===i){e.next=14;break}return n("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),d(J({key:"password",value:""})),d(J({key:"passwordConfirm",value:""})),e.abrupt("return");case 14:return(p=new FormData).append("file",u),p.append("email",f.email),p.append("password",f.password),p.append("name",f.name),p.append("mbti",f.mbti),p.append("gender",f.gender),e.next=23,ae(p,f);case 23:E=e.sent,console.log("[DEBUG] postSignup result.data:",E.data),d(q(se(E.data)));case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe,{title:"Sign up"}),i.a.createElement(me,{register:f,onChange:function(e){var t=e.target,a=t.value,n=t.name;d(J({name:n,value:a}))},onFileChange:function(e){p(e.target.files[0])},onSubmit:h,error:a}))},fe=a(19),de=a(18),he=(a(144),function(){return i.a.createElement("nav",{className:"tab-list"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(p.c,{to:"/profile",activeClassName:"selected"},i.a.createElement(de.a,{icon:fe.g}))),i.a.createElement("li",null,i.a.createElement(p.c,{to:"/users/list",activeClassName:"selected"},i.a.createElement(de.a,{icon:fe.h}))),i.a.createElement("li",null,i.a.createElement(p.c,{to:"/chats",activeClassName:"selected"},i.a.createElement(de.a,{icon:fe.b})))))}),be=a(92),ge=a.n(be),ve=(a(147),function(e){var t=e.partner,a=e.view,n=e.matchData,r=e.myMbti,c=e.myName,o=25*n.match(/\d+/)[0];return i.a.createElement("div",{className:"choice-list show-".concat(a)},t&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"front card"},i.a.createElement("img",{src:t.profileImage,className:"profile-image",alt:"profile"}),i.a.createElement("div",{className:"info"},i.a.createElement("p",{className:"name"},t.name),i.a.createElement("pre",{className:"description"},t.description))),i.a.createElement("div",{className:"back card ".concat(n)},i.a.createElement("p",{className:"title"},"\ub0b4 MBTI\uc640\uc758",i.a.createElement("br",null)," \uc801\ud569\uc131\uc740?"),i.a.createElement("ul",{className:"emoji-list"},i.a.createElement("li",null,i.a.createElement("div",{className:"emoji emoji--haha"},i.a.createElement("div",{className:"emoji__face"},i.a.createElement("div",{className:"emoji__eyes"}),i.a.createElement("div",{className:"emoji__mouth"},i.a.createElement("div",{className:"emoji__tongue"}))))),i.a.createElement("li",null,i.a.createElement("div",{className:"emoji emoji--yay"},i.a.createElement("div",{className:"emoji__face"},i.a.createElement("div",{className:"emoji__eyebrows"}),i.a.createElement("div",{className:"emoji__mouth"})))),i.a.createElement("li",null,i.a.createElement("div",{className:"emoji emoji--wow"},i.a.createElement("div",{className:"emoji__face"},i.a.createElement("div",{className:"emoji__eyebrows"}),i.a.createElement("div",{className:"emoji__eyes"}),i.a.createElement("div",{className:"emoji__mouth"})))),i.a.createElement("li",null,i.a.createElement("div",{className:"emoji emoji--sad"},i.a.createElement("div",{className:"emoji__face"},i.a.createElement("div",{className:"emoji__eyebrows"}),i.a.createElement("div",{className:"emoji__eyes"}),i.a.createElement("div",{className:"emoji__mouth"})))),i.a.createElement("li",null,i.a.createElement("div",{className:"emoji emoji--angry"},i.a.createElement("div",{className:"emoji__face"},i.a.createElement("div",{className:"emoji__eyebrows"}),i.a.createElement("div",{className:"emoji__eyes"}),i.a.createElement("div",{className:"emoji__mouth"}))))),i.a.createElement("div",{className:"figure"},i.a.createElement(ge.a,{start:0,end:o,duration:3}),i.a.createElement("span",null,"%")),i.a.createElement("ul",{className:"mbti-info"},i.a.createElement("li",null,i.a.createElement("p",{className:"name"},c),i.a.createElement("p",{className:"mbti"},r)),i.a.createElement("li",{className:"arrow"},i.a.createElement(de.a,{icon:fe.a})),i.a.createElement("li",null,i.a.createElement("p",{className:"name"},t.name),i.a.createElement("p",{className:"mbti"},t.mbti.type))))))}),je=(a(148),function(e){var t=e.onLikeClick,a=e.onUnLikeClick;return i.a.createElement("div",{className:"choice-tab"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("button",{onClick:t},i.a.createElement(de.a,{icon:fe.e}),i.a.createElement("span",null,"Like"))),i.a.createElement("li",null,i.a.createElement("button",{onClick:a},i.a.createElement(de.a,{icon:fe.f}),i.a.createElement("span",null,"Pass")))))}),Oe=(a(149),function(e){var t=e.onNextClick;return i.a.createElement("div",{className:"next-tab"},i.a.createElement("button",{onClick:t},i.a.createElement("span",null,"next"),i.a.createElement(de.a,{icon:fe.c})))}),Ne=function(e){var t=e.notice,a=void 0===t?null:t;return i.a.createElement("div",{className:"notice-content"},i.a.createElement(G,null),i.a.createElement("p",null,a))},Ce=(a(150),function(e){var t=e.onPopupClick;return i.a.createElement("div",{className:"popup",onClick:t},i.a.createElement("p",null,"\ucc44\ud305\ubc29\uc774",i.a.createElement("br",null)," \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),i.a.createElement("button",null,"\ud655\uc778"))}),we=function(){var e=Object(o.useState)("front"),t=Object(P.a)(e,2),a=t[0],n=t[1],l=Object(o.useState)("level0"),s=Object(P.a)(l,2),u=s[0],p=s[1],E=Object(o.useState)(!1),f=Object(P.a)(E,2),d=f[0],h=f[1],b=Object(o.useState)("\uc720\uc800 \uc815\ubcf4\ub97c \uac00\uc838\uc624\uace0 \uc788\uc2b5\ub2c8\ub2e4.\ud83d\ude4f"),g=Object(P.a)(b,2),v=g[0],j=g[1],O=Object(m.b)(),w=Object(m.c)(function(e){return{users:e.users,user:e.user,pageIndex:e.pageIndex,hasUsersNotice:e.hasUsersNotice,choiceCount:e.choiceCount,totalUserCount:e.totalUserCount,totalChoiceCount:e.totalChoiceCount}}),S=w.users,y=w.user,_=(w.pageIndex,w.hasUsersNotice),x=w.choiceCount,I=w.totalUserCount,T=w.totalChoiceCount;Object(o.useEffect)(function(){return function(){var e=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re({limit:5,pageIndex:0});case 2:if((t=e.sent).total_user_count){e.next=7;break}return j("\ubaa8\ub4e0 \ud68c\uc6d0\uc744 \uc120\ud0dd \ud558\uc168\uc2b5\ub2c8\ub2e4~! \uace0\uc0dd\ud558\uc168\uc2b5\ub2c8\ub2e4!\ud83d\udc4f"),O(V()),e.abrupt("return");case 7:O((a=se(t),{type:N,users:a.users,totalUserCount:a.totalUserCount}));case 8:case"end":return e.stop()}var a},e)}));return function(){return e.apply(this,arguments)}}()(),function(){O({type:k})}},[O]);var A=function(){var e=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$()({url:"".concat(te,"/api/user/likes"),method:"GET"}).then(function(e){return e.data.likes_me}).catch(function(e){console.log(e)});case 2:if(!e.sent.includes(S[x].id)){e.next=9;break}return e.next=6,a=S[x].id,$()({url:"".concat(te,"/api/chats/").concat(a),method:"POST"}).then(function(e){return e.data}).catch(function(e){console.log(e)});case 6:h(!0),e.next=10;break;case 9:ce(S[x].id);case 10:n("back"),t=Object.keys(y.mbti).find(function(e){if("object"===typeof y.mbti[e])return y.mbti[e].includes(S[x].mbti.type)}),p(t);case 13:case"end":return e.stop()}var a},e)}));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(S[x].id);case 2:F();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I!==T+1){e.next=4;break}return j("\ubaa8\ub4e0 \ud68c\uc6d0\uc744 \uc120\ud0dd \ud558\uc168\uc2b5\ub2c8\ub2e4~! \uace0\uc0dd\ud558\uc168\uc2b5\ub2c8\ub2e4!"),O(V()),e.abrupt("return");case 4:O({type:C}),n("front"),p("level0");case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"page-wrap"},i.a.createElement(he,null),_?i.a.createElement(Ne,{notice:v}):i.a.createElement(i.a.Fragment,null,i.a.createElement(ve,{partner:S[x],view:a,matchData:u,myMbti:y.mbti.type,myName:y.name}),"front"===a&&i.a.createElement(je,{onLikeClick:A,onUnLikeClick:R})||i.a.createElement(Oe,{onNextClick:F}),d&&i.a.createElement(Ce,{onPopupClick:function(){h(!1)}})))},Se=(a(151),function(e){var t=e.user,a=t.profileImage,n=t.name,r=t.mbti,c=t.likeMe,o=t.description;return i.a.createElement("div",{className:"profile-area"},i.a.createElement("img",{src:a,alt:"profile",className:"profile-image"}),i.a.createElement("p",null,i.a.createElement("span",{className:"name"},n),i.a.createElement("span",{className:"mbti"},r.type)),i.a.createElement("p",{className:"likes"},i.a.createElement(de.a,{icon:fe.d}),i.a.createElement("span",{className:"num"},c.length)),o&&i.a.createElement("pre",{className:"description"},o))}),ye=function(){var e=Object(m.b)(),t=Object(m.c)(function(e){return{user:e.user}}).user,a=function(){var t=Object(c.a)(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:$()({url:"".concat(te,"/api/logout"),method:"GET"}).catch(function(e){console.log(e)}).then(function(t){e({type:g})});case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),n=function(){var e=Object(c.a)(r.a.mark(function e(){var t,a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("jwt")){e.next=3;break}return e.abrupt("return",alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."));case 3:return e.prev=3,e.next=6,fetch("https://wfqynf004c.execute-api.ap-northeast-2.amazonaws.com/prod/user",{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});case 6:return a=e.sent,e.next=9,a.json();case 9:n=e.sent,console.log("\uc751\ub2f5:",n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error("API \ud638\ucd9c \uc624\ub958:",e.t0);case 16:case"end":return e.stop()}},e,null,[[3,13]])}));return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement(he,null),i.a.createElement("div",{className:"content"},i.a.createElement(Se,{user:t}),i.a.createElement(p.b,{to:"/profile/edit",className:"link-button"},"\uc218\uc815\ud558\uae30"),i.a.createElement("button",{href:"#none",onClick:a,className:"link-button"},"\ub85c\uadf8\uc544\uc6c3"),i.a.createElement("button",{onClick:n},"\ub0b4 \uc815\ubcf4 \ubd88\ub7ec\uc624\uae30")))},_e=(a(152),function(e){var t=e.onSubmit,a=e.onChange,n=e.edit,r=e.error,c=e.onFileChange,l=null;return Object(o.useEffect)(function(){l.scrollIntoView({block:"start"})},[r,l]),i.a.createElement("div",{className:"edit-form form"},i.a.createElement("form",{onSubmit:t,ref:function(e){return l=e}},i.a.createElement("p",null,r),i.a.createElement("select",{name:"mbti",id:"mbti",required:!0,value:n.mbti,onChange:a},i.a.createElement("option",{value:""},"mbti\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694."),i.a.createElement("option",{value:"intj"},"INTJ \uc6a9\uc758\uc8fc\ub3c4\ud55c \uc804\ub7b5\uac00"),i.a.createElement("option",{value:"intp"},"INTP \ub17c\ub9ac\uc801\uc778 \uc0ac\uc0c9\uac00"),i.a.createElement("option",{value:"entj"},"ENTJ \ub300\ub2f4\ud55c \ud1b5\uc194\uc790"),i.a.createElement("option",{value:"entp"},"ENTP \ub728\uac70\uc6b4 \ub17c\uc7c1\uc744 \uc990\uae30\ub294 \ubcc0\ub860\uac00"),i.a.createElement("option",{value:"infj"},"INFJ \uc120\uc758\uc758 \uc639\ud638\uc790"),i.a.createElement("option",{value:"infp"},"INFP \uc5f4\uc815\uc801\uc778 \uc911\uc7ac\uc790"),i.a.createElement("option",{value:"enfj"},"ENFJ \uc815\uc758\ub85c\uc6b4 \uc0ac\ud68c\uc6b4\ub3d9\uac00"),i.a.createElement("option",{value:"enfp"},"ENFP \uc7ac\uae30\ubc1c\ub784\ud55c \ud65c\ub3d9\uac00"),i.a.createElement("option",{value:"istj"},"ISTJ \uccad\ub834\uacb0\ubc31\ud55c \ub17c\ub9ac\uc8fc\uc758\uc790"),i.a.createElement("option",{value:"isfj"},"ISFJ \uc6a9\uac10\ud55c \uc218\ud638\uc790"),i.a.createElement("option",{value:"estj"},"ESTJ \uc5c4\uaca9\ud55c \uad00\ub9ac\uc790"),i.a.createElement("option",{value:"esfj"},"ESFJ \uc0ac\uad50\uc801\uc778 \uc678\uad50\uad00"),i.a.createElement("option",{value:"istp"},"ISTP \ub9cc\ub2a5 \uc7ac\uc8fc\uafbc"),i.a.createElement("option",{value:"isfp"},"ISFP \ud638\uae30\uc2ec \ub9ce\uc740 \uc608\uc220\uac00"),i.a.createElement("option",{value:"estp"},"ESTP \ubaa8\ud5d8\uc744 \uc990\uae30\ub294 \uc0ac\uc5c5\uac00"),i.a.createElement("option",{value:"esfp"},"ESFP \uc790\uc720\ub85c\uc6b4 \uc601\ud63c\uc758 \uc5f0\uc608\uc778")),i.a.createElement("label",{htmlFor:"name"},"name"),i.a.createElement("input",{type:"text",name:"name",required:!0,value:n.name,onChange:a,maxLength:"13"}),i.a.createElement("label",{htmlFor:"file"},"\ud504\ub85c\ud544 \uc0ac\uc9c4"),i.a.createElement("input",{type:"file",name:"file",id:"file",onChange:c,accept:"image/x-png,image/gif,image/jpeg"}),i.a.createElement("p",{className:"title"},"\ud68c\uc6d0\ub2d8\uc758 \uc815\ubcf4"),i.a.createElement("textarea",{name:"description",className:"description",cols:"20",rows:"3",maxLength:"100",value:n.description,onChange:a}),i.a.createElement("button",null,"\uc218\uc815\ud558\uae30")))}),ke=function(){var e=Object(o.useState)(""),t=Object(P.a)(e,2),a=t[0],n=t[1],l=Object(o.useState)(null),s=Object(P.a)(l,2),u=s[0],p=s[1],E=Object(m.c)(function(e){return{edit:e.edit,user:e.user}}),f=E.edit,d=E.user,h=Object(m.b)(),b=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,c,o,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=f.name,c=f.mbti,![a,c].includes("")){e.next=5;break}return n("\ubaa8\ub450 \uc785\ub825\ud558\uc138\uc694."),e.abrupt("return");case 5:if((o=new FormData).append("file",u),u){e.next=13;break}return e.next=10,ie(f);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,ie(f,o);case 15:e.t0=e.sent;case 16:i=e.t0,h(z(se(i)));case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe,{title:"Settings"}),i.a.createElement(_e,{user:d,edit:f,onChange:function(e){var t=e.target,a=t.value,n=t.name;h(function(e){var t=e.name,a=e.value;return{type:R,name:t,value:a}}({name:n,value:a}))},onFileChange:function(e){p(e.target.files[0])},onSubmit:b,error:a}))},xe=(a(153),function(e){var t=e.chats,a=t.map(function(e,a){return i.a.createElement("li",{key:a},i.a.createElement(p.b,{to:"/chat/room/".concat(e._id)},i.a.createElement("div",{className:"left"},i.a.createElement("img",{src:e.partner.profile_image,alt:"profile"})),i.a.createElement("div",{className:"right"},i.a.createElement("p",{className:"name"},e.partner.name),t[a].messages.length&&i.a.createElement("p",{className:"message"},t[a].messages[t[a].messages.length-1].content)||i.a.createElement("p",{className:"message none"},"\uba3c\uc800 \uc778\uc0ac\ud574 \ubcf4\uc138\uc694~!"))))});return i.a.createElement("div",{className:"chat-list"},i.a.createElement("ul",null,a))}),Ie=function(){var e=Object(o.useState)("\ucc44\ud305 \uc815\ubcf4\ub97c \uac00\uc838\uc624\uace0 \uc788\uc2b5\ub2c8\ub2e4.\ud83d\ude4f"),t=Object(P.a)(e,2),a=t[0],n=t[1],l=Object(m.c)(function(e){return{chats:e.chats,hasChatsNotice:e.hasChatsNotice}}),s=l.chats,u=l.hasChatsNotice,p=Object(m.b)();return Object(o.useEffect)(function(){(function(){var e=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$()({url:"".concat(te,"/api/chats"),method:"GET"}).then(function(e){return e.data}).catch(function(e){console.log(e)});case 2:if((t=e.sent).chats.length){e.next=6;break}return n("\ucc44\ud305 \ubaa9\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.\ud83d\ude2d"),e.abrupt("return");case 6:p(K(t.chats));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[p]),i.a.createElement(i.a.Fragment,null,i.a.createElement(he,null),u?i.a.createElement(Ne,{notice:a}):i.a.createElement(xe,{chats:s}))},Te=(a(154),function(e){var t=e.onMessageChange,a=e.message,n=e.onSubmit,r=e.onKeyPress;return i.a.createElement("div",{className:"input-message"},i.a.createElement("input",{type:"text",className:"input-text",onChange:t,value:a,onKeyPress:r}),i.a.createElement("button",{onClick:n},"\uc804\uc1a1"))}),Ae=(a(155),function(e){var t=e.chats,a=e.user,n=null,r="";return Object(o.useEffect)(function(){n.scrollIntoView({block:"end"})},[t,n]),t.hasOwnProperty("messages")&&(r=t.messages.map(function(e,n){var r=e.speaker!==a.id?"left":"right",c=e.speaker===a.id?a:t.partner;return i.a.createElement("li",{key:n,className:"".concat(r," ").concat(c===t.partner?"partner":"me")},i.a.createElement("img",{src:c.profileImage,className:"profile-image",alt:"profile"}),c===t.partner&&i.a.createElement("p",{className:"name"},c.name),i.a.createElement("p",{className:"talk"},e.content))})),i.a.createElement("div",{className:"messages"},i.a.createElement("ul",{ref:function(e){return n=e}},r))}),Re=function(){var e=Object(o.useState)(""),t=Object(P.a)(e,2),a=t[0],n=t[1],l=Object(m.c)(function(e){return{client:e.client,user:e.user,currentRoomChat:e.currentRoomChat}}),s=l.client,u=l.user,p=l.currentRoomChat,f=Object(m.b)(),d=Object(E.s)().roomId,h=u.id;Object(o.useEffect)(function(){return function(){var e=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(d);case 2:t=e.sent,f(X(se(t)));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),s.joinRoom({roomId:d,userId:h}),s.receiveNewMessage(function(e){var t;f((t={createAt:new Date,content:e.message,speaker:e.userId},{type:T,newMessage:t}))}),function(){s.leaveRoom(d),f({type:A})}},[]);var b=function(){a&&(s.sendMessage({roomId:d,userId:h,message:a}),function(e,t){$()({url:"".concat(te,"/api/chats/").concat(e),method:"PUT",data:t}).then(function(e){return console.log(e.data),e.data}).catch(function(e){console.log(e)})}(d,{message:a}),n(""))};return i.a.createElement(i.a.Fragment,null,p.hasOwnProperty("partner")&&i.a.createElement(pe,{title:p.partner.name||""}),i.a.createElement(Ae,{chats:p,user:u}),i.a.createElement(Te,{onMessageChange:function(e){var t=e.currentTarget.value;n(t)},message:a,onKeyPress:function(e){"Enter"===e.key&&b()},onSubmit:b,chat:p}))},Fe=function(){return i.a.createElement("div",null,"\ud398\uc774\uc9c0\ub97c \ucc3e\uc9c0 \ubabb\ud558\uc600\uc2b5\ub2c8\ub2e4.")},Pe=function(){return i.a.createElement("div",{className:"main-loading"},i.a.createElement(G,null))},Ue=function(e){var t=e.children,a=Object(E.o)();return Object(m.c)(function(e){return e.isAuthenticated})?t:i.a.createElement(E.a,{to:"/login",state:{from:a}})},Le=function(e){var t=e.children;return Object(m.c)(function(e){return e.isAuthenticated})?i.a.createElement(E.a,{to:"/profile"}):t},Me=function(){var e=Object(m.b)(),t=Object(m.c)(function(e){return{isMainLoading:e.isMainLoading}}).isMainLoading;return Object(o.useEffect)(function(){e({type:h})},[]),i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"wrap"},t?i.a.createElement(Pe,null):i.a.createElement(E.d,null,i.a.createElement(E.b,{path:"/",element:i.a.createElement(E.a,{to:"/login",replace:!0})}),i.a.createElement(E.b,{path:"/login",element:i.a.createElement(Le,null,i.a.createElement(ue,null))}),i.a.createElement(E.b,{path:"/signup",element:i.a.createElement(Le,null,i.a.createElement(Ee,null))}),i.a.createElement(E.b,{path:"/profile/edit",element:i.a.createElement(Ue,null,i.a.createElement(ke,null))}),i.a.createElement(E.b,{path:"/profile",element:i.a.createElement(Ue,null,i.a.createElement(ye,null))}),i.a.createElement(E.b,{path:"/users/list",element:i.a.createElement(Ue,null,i.a.createElement(we,null))}),i.a.createElement(E.b,{path:"/chats",element:i.a.createElement(Ue,null,i.a.createElement(Ie,null))}),i.a.createElement(E.b,{path:"/chat/room/:roomId",element:i.a.createElement(Ue,null,i.a.createElement(Re,null))}),i.a.createElement(E.b,{path:"*",element:i.a.createElement(Fe,null)}))))},De=(a(156),a(15)),Ge=a(93),Je=a.n(Ge),qe=Q.SOCKET_ROOT,Be={register:{email:"",mbti:"",password:"",passwordConfirm:"",name:"",location:{latitude:0,longitude:0},gender:"",description:""},login:{email:"",password:"",location:{latitude:0,longitude:0}},user:{id:"",mbti:{},name:"",profileImage:"",dob:"",location:{latitude:0,longitude:0},gender:"",description:"",dislikeUsers:[],likeMe:[],chats:[],mailConfirm:!1},edit:{mbti:"",name:"",description:""},isAuthenticated:!1,users:[],totalUserCount:0,totalChoiceCount:0,choiceCount:0,pageIndex:0,chats:[],client:function(){var e=Je()(qe,{path:"/socket.io/",transports:["websocket"],secure:!0});e.on("ERROR",function(e){console.log(e)});return{joinRoom:function(t){e.emit("JOIN",t)},sendMessage:function(t){e.emit("MESSAGE",t)},receiveNewMessage:function(t){e.on("MESSAGE",t)},leaveRoom:function(t){e.removeListener("MESSAGE"),e.removeListener("ERROR"),e.emit("LEAVE",t)}}}(),currentRoomChat:{},isMainLoading:!0,hasUsersNotice:!0,hasChatsNotice:!0};var He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object.assign({},e,{register:Object.assign({},e.register,Object(W.a)({},t.name,t.value))});case R:return Object.assign({},e,{edit:Object.assign({},e.edit,Object(W.a)({},t.name,t.value))});case f:return Object.assign({},e,{login:Object.assign({},e.login,Object(W.a)({},t.name,t.value))});case h:return Object.assign({},e,{isMainLoading:!1});case O:return Object.assign({},e,Object(W.a)({},t.state,Object.assign({},e[t.state],{location:t.location})));case d:return Object.assign({},e,{edit:t.edit,user:t.user,isAuthenticated:!0,isMainLoading:!1,login:Be.login});case b:return Object.assign({},e,{edit:t.edit,user:t.user,register:Be.register,isAuthenticated:t.isAuthenticated});case j:return Object.assign({},e,{user:t.user});case N:return Object.assign({},e,{users:t.users,totalUserCount:t.totalUserCount,totalChoiceCount:0,hasUsersNotice:!1});case _:return Object.assign({},e,{users:t.users,hasUsersNotice:!1});case g:return Object.assign({},e,{users:Be.users,isAuthenticated:!1});case C:return Object.assign({},e,{totalChoiceCount:e.totalChoiceCount+1,choiceCount:e.choiceCount+1});case w:return Object.assign({},e,{choiceCount:0});case S:return Object.assign({},e,{pageIndex:e.pageIndex+1});case y:return Object.assign({},e,{hasUsersNotice:!0});case x:return Object.assign({},e,{chats:t.chats,hasChatsNotice:!1});case I:return Object.assign({},e,{currentRoomChat:t.chat});case T:return Object.assign({},e,{currentRoomChat:Object.assign({},e.currentRoomChat,{messages:[].concat(Object(De.a)(e.currentRoomChat.messages),[t.newMessage])})});case A:return Object.assign({},e,{currentRoomChat:{}});case F:return Object.assign({},e,{hasChatsNotice:!0});case k:return Object.assign({},e,{users:[],totalUserCount:0,totalChoiceCount:0,choiceCount:0,pageIndex:0,hasUsersNotice:!0});default:return e}};M.a.configure(L);var ze=Object(u.b)(He,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());(function(){var e=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:(t=e.sent)&&t.isAuthenticated?ze.dispatch(H(se(t.user))):ze.dispatch({type:"CHECK_USER_NOT_LOGIN"});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()(),s.a.render(i.a.createElement(m.a,{store:ze},i.a.createElement(p.a,null,i.a.createElement(Me,null))),document.getElementById("root"))},96:function(e,t,a){e.exports=a(184)}},[[96,1,2]]]);
//# sourceMappingURL=main.57eb29c4.chunk.js.map